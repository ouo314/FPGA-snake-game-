

### 1. 系統概要

基於 Altera MAX10 (DE10-Lite) FPGA 開發板，結合 **4x4 Keypad** 與 **8x8 LED Dot Matrix** 的經典貪吃蛇遊戲。具備進階的 PWM 視覺效果、無重疊食物生成演算法以及計分/計時系統。

---

### 2. 遊戲規則與機制 (Gameplay)

* **移動機制**：
* 蛇每 **0.5 秒** 自動移動一格。
* **禁止回頭**：正在向右時，無法直接轉向左，反之亦然。


* **控制方式 (Keypad)**：
* `2`：上 (UP)
* `8`：下 (DOWN)
* `4`：左 (LEFT)
* `6`：右 (RIGHT)


* **得分與成長**：
* 吃到食物：長度 +1 (最大長度 15)，分數 +1 (上限 99)。
* 食物重生：保證出現在空白處。


* **遊戲結束條件 (Game Over)**：
1. **撞牆**：蛇頭觸碰邊界且試圖移出邊界。
2. **自噬**：蛇頭撞到自己的身體。
3. **時間到**：30 秒倒數歸零。


* *狀態*：遊戲結束時，蛇停止移動，畫面顯示X。



---

### 3. 顯示與視覺效果 (Visuals)

* **8x8 LED 矩陣 (PWM 驅動)**：
* **蛇頭**：最高亮度 (Highlight)。
* **蛇身**：**漸層亮度 (Gradient)**，越靠近尾巴越暗，產生漸層視覺效果。
* **食物**：**呼吸/閃爍 (Blinking)** 效果，全亮顯示。
* **Game Over**：顯示一個高亮度的 **大「X」圖案**。


* **七段顯示器 (7-Segment)**：
* **HEX5, HEX4 (左)**：顯示 **剩餘時間** (30秒倒數)。
* **HEX1, HEX0 (右)**：顯示 **當前分數** (00~99)。



### 5. 模組架構 (Module Architecture)

* **`snake.v` (Top Module)**：
* 系統整合，連接 Keypad、LED Matrix、七段顯示器。


* **`snake_core.v` (Game Logic)**：
* 處理狀態機、移動邏輯、撞牆/撞身檢測、時間計數、分數計算。
* 內含**食物生成**。


* **`led_driver_snake_pwm.v` (Display Driver)**：
* 負責高速掃描 LED Matrix。
* 計算每個像素的 **PWM 亮度** (蛇頭亮、蛇身漸暗、X圖案)。


* **`keypad_scanner.v`**：
* 負責掃描 4x4 鍵盤。


* **`seven_segment.v`**：
* BCD 解碼，將分數與時間轉為七段顯示碼。
